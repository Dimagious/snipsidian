(()=>{var Fe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,i)=>(typeof require<"u"?require:n)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var xi=Fe("obsidian");function ze(e){return!(e.isInFrontmatter||e.isInCode||e.isInMath)}var me=[" ","	",`
`,".",",","!","?",";",":","(",")","[","]","{","}",'"',"'","-","\\","/","|"];function xe(e){return/[\s.,!?;:()\[\]{}"'\-\\/|]/.test(e)}function Je(e,n,i=me){let{textBefore:t,sepCh:r,lastTyped:l}=e;if(!i.includes(l))return null;let o=y=>/[A-Za-z0-9_]/.test(y),s=r-1;if(s<0)return null;let a=t+l;if(!o(a[s]))return null;let c=s;for(;c-1>=0&&o(a[c-1]);)c--;let p=c,u=r,f=a.slice(p,u);if(!f)return null;let d=p-1>=0?a[p-1]:"";return d&&!xe(d)||n[f]===void 0?null:{trigger:f,fromCh:p,toCh:u}}var Xe="$|";function ye(e){return e<10?`0${e}`:`${e}`}function yi(e){return`${e.getFullYear()}-${ye(e.getMonth()+1)}-${ye(e.getDate())}`}function vi(e){return`${ye(e.getHours())}:${ye(e.getMinutes())}`}async function Ze(e,n){let i=e,t,r=i.indexOf(Xe);if(r>=0&&(i=i.slice(0,r)+i.slice(r+Xe.length),t=r),i=i.replace(/\$date\b/g,()=>yi(n.now)),i=i.replace(/\$time\b/g,()=>vi(n.now)),i=i.replace(/\$filename\b/g,()=>n.filename??""),/\$clipboard\b/.test(i)&&n.readClipboard){let l=await n.readClipboard().catch(()=>"");i=i.replace(/\$clipboard\b/g,()=>l??"")}else i=i.replace(/\$clipboard\b/g,"");return{text:i,cursorDelta:t}}function en(e,n,i){let t=i.text,r=n.fromCh,l=n.toCh,o=i.cursorDelta!==void 0?r+i.cursorDelta:r+t.length;return{fromCh:r,toCh:l,insert:t,newCursorCh:o}}async function Le(e,n,i,t=me){if(!ze(i))return null;let r=Je(e,n,t);if(!r)return null;let l=n[r.trigger]??"",o=await Ze(l,i);return en(e,r,o)}function nn(e,n,i){if((e(0)??"").trim()!=="---")return!1;for(let r=1;r<=Math.min(i,n);r++){if((e(r)??"").trim()==="---")return!1;if(r===i)return!0}return i>0}function rn(e,n,i){let t=!1,r=null;for(let l=0;l<=Math.min(i,n);l++){let o=(e(l)??"").trimStart();if(o.startsWith("```")){t?r==="`"&&(t=!1):(t=!0,r="`");continue}if(o.startsWith("~~~")){t?r==="~"&&(t=!1):(t=!0,r="~");continue}}return t}function tn(e,n){let i=e.slice(0,n),t=0,r=0;for(;t<i.length;){if(i[t]==="\\"){t+=2;continue}if(i.startsWith("```",t)){t+=3;continue}if(i[t]==="`"){r++,t++;continue}t++}return r%2===1}function wi(e,n,i){let t=e.getCursor(),r=e.getLine(t.line)??"",l=r.slice(0,n),o=r.slice(n+1);return{textBefore:l,textAfter:o,lastTyped:i,sepCh:n}}function bi(e,n,i,t){let r=e.getCursor(),l=p=>e.getLine(p)??"",o=e.lastLine(),s=nn(l,o,r.line),a=rn(l,o,r.line),c=tn(l(r.line),r.ch);return{isInCode:a||c,isInMath:!1,isInFrontmatter:s,filename:n,now:i,readClipboard:t}}function Ai(e,n){let i=e.getCursor(),t={line:i.line,ch:n.fromCh},r={line:i.line,ch:n.toCh};e.replaceRange(n.insert,t,r),n.newCursorCh!==void 0&&e.setCursor({line:i.line,ch:n.newCursorCh})}async function on(e,n,i){let t=e.getCursor(),r=e.getLine(t.line)??"";if(t.ch===0)return;let l=r[t.ch-1]??"";if(!xe(l))return;let o=t.ch-1,s=wi(e,o,l),a=bi(e,i.filename,i.now,i.readClipboard),c=await Le(s,n,a);c&&Ai(e,c)}async function ln(){try{if(typeof navigator<"u"&&navigator.clipboard?.readText)return await navigator.clipboard.readText()}catch{}return""}var sn={now(){return new Date}};function an(e,n){let i=e.workspace.on("editor-change",async(t,r)=>{if(!t)return;let o=e.workspace.getActiveFile()?.name;await on(t,n(),{filename:o,now:sn.now(),readClipboard:ln})});return()=>e.workspace.offref(i)}var v=Fe("obsidian");var ve={brb:"be right back",omw:"on my way",ty:"thank you",imo:"in my opinion",code:"```$|\n```",todo:"- [ ] $|",bullet:"- $|",quote:"> $|",h1:"# $|",h2:"## $|",h3:"### $|",today:"{{date:YYYY-MM-DD}}",now:"{{time:HH:mm}}"};function Cn(e){return typeof e>"u"||e===null}function Ei(e){return typeof e=="object"&&e!==null}function Ci(e){return Array.isArray(e)?e:Cn(e)?[]:[e]}function Si(e,n){var i,t,r,l;if(n)for(l=Object.keys(n),i=0,t=l.length;i<t;i+=1)r=l[i],e[r]=n[r];return e}function ki(e,n){var i="",t;for(t=0;t<n;t+=1)i+=e;return i}function Ti(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var _i=Cn,Oi=Ei,Ii=Ci,Fi=ki,Li=Ti,Di=Si,N={isNothing:_i,isObject:Oi,toArray:Ii,repeat:Fi,isNegativeZero:Li,extend:Di};function Sn(e,n){var i="",t=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(i+=`

`+e.mark.snippet),t+" "+i):t}function ue(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=Sn(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ue.prototype=Object.create(Error.prototype);ue.prototype.constructor=ue;ue.prototype.toString=function(n){return this.name+": "+Sn(this,n)};var $=ue;function De(e,n,i,t,r){var l="",o="",s=Math.floor(r/2)-1;return t-n>s&&(l=" ... ",n=t-s+l.length),i-t>s&&(o=" ...",i=t+s-o.length),{str:l+e.slice(n,i).replace(/\t/g,"\u2192")+o,pos:t-n+l.length}}function Ne(e,n){return N.repeat(" ",n-e.length)+e}function Ni(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var i=/\r?\n|\r|\0/g,t=[0],r=[],l,o=-1;l=i.exec(e.buffer);)r.push(l.index),t.push(l.index+l[0].length),e.position<=l.index&&o<0&&(o=t.length-2);o<0&&(o=t.length-1);var s="",a,c,p=Math.min(e.line+n.linesAfter,r.length).toString().length,u=n.maxLength-(n.indent+p+3);for(a=1;a<=n.linesBefore&&!(o-a<0);a++)c=De(e.buffer,t[o-a],r[o-a],e.position-(t[o]-t[o-a]),u),s=N.repeat(" ",n.indent)+Ne((e.line-a+1).toString(),p)+" | "+c.str+`
`+s;for(c=De(e.buffer,t[o],r[o],e.position,u),s+=N.repeat(" ",n.indent)+Ne((e.line+1).toString(),p)+" | "+c.str+`
`,s+=N.repeat("-",n.indent+p+3+c.pos)+`^
`,a=1;a<=n.linesAfter&&!(o+a>=r.length);a++)c=De(e.buffer,t[o+a],r[o+a],e.position-(t[o]-t[o+a]),u),s+=N.repeat(" ",n.indent)+Ne((e.line+a+1).toString(),p)+" | "+c.str+`
`;return s.replace(/\n$/,"")}var Mi=Ni,Ri=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Pi=["scalar","sequence","mapping"];function Bi(e){var n={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(t){n[String(t)]=i})}),n}function $i(e,n){if(n=n||{},Object.keys(n).forEach(function(i){if(Ri.indexOf(i)===-1)throw new $('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(i){return i},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=Bi(n.styleAliases||null),Pi.indexOf(this.kind)===-1)throw new $('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var R=$i;function cn(e,n){var i=[];return e[n].forEach(function(t){var r=i.length;i.forEach(function(l,o){l.tag===t.tag&&l.kind===t.kind&&l.multi===t.multi&&(r=o)}),i[r]=t}),i}function Ui(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,i;function t(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(n=0,i=arguments.length;n<i;n+=1)arguments[n].forEach(t);return e}function Re(e){return this.extend(e)}Re.prototype.extend=function(n){var i=[],t=[];if(n instanceof R)t.push(n);else if(Array.isArray(n))t=t.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(i=i.concat(n.implicit)),n.explicit&&(t=t.concat(n.explicit));else throw new $("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(l){if(!(l instanceof R))throw new $("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new $("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new $("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),t.forEach(function(l){if(!(l instanceof R))throw new $("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(Re.prototype);return r.implicit=(this.implicit||[]).concat(i),r.explicit=(this.explicit||[]).concat(t),r.compiledImplicit=cn(r,"implicit"),r.compiledExplicit=cn(r,"explicit"),r.compiledTypeMap=Ui(r.compiledImplicit,r.compiledExplicit),r};var kn=Re,Tn=new R("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),_n=new R("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),On=new R("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),In=new kn({explicit:[Tn,_n,On]});function Yi(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function ji(){return null}function Hi(e){return e===null}var Fn=new R("tag:yaml.org,2002:null",{kind:"scalar",resolve:Yi,construct:ji,predicate:Hi,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Ki(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function Gi(e){return e==="true"||e==="True"||e==="TRUE"}function Wi(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Ln=new R("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ki,construct:Gi,predicate:Wi,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function qi(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Vi(e){return 48<=e&&e<=55}function Qi(e){return 48<=e&&e<=57}function zi(e){if(e===null)return!1;var n=e.length,i=0,t=!1,r;if(!n)return!1;if(r=e[i],(r==="-"||r==="+")&&(r=e[++i]),r==="0"){if(i+1===n)return!0;if(r=e[++i],r==="b"){for(i++;i<n;i++)if(r=e[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;t=!0}return t&&r!=="_"}if(r==="x"){for(i++;i<n;i++)if(r=e[i],r!=="_"){if(!qi(e.charCodeAt(i)))return!1;t=!0}return t&&r!=="_"}if(r==="o"){for(i++;i<n;i++)if(r=e[i],r!=="_"){if(!Vi(e.charCodeAt(i)))return!1;t=!0}return t&&r!=="_"}}if(r==="_")return!1;for(;i<n;i++)if(r=e[i],r!=="_"){if(!Qi(e.charCodeAt(i)))return!1;t=!0}return!(!t||r==="_")}function Ji(e){var n=e,i=1,t;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),t=n[0],(t==="-"||t==="+")&&(t==="-"&&(i=-1),n=n.slice(1),t=n[0]),n==="0")return 0;if(t==="0"){if(n[1]==="b")return i*parseInt(n.slice(2),2);if(n[1]==="x")return i*parseInt(n.slice(2),16);if(n[1]==="o")return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)}function Xi(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!N.isNegativeZero(e)}var Dn=new R("tag:yaml.org,2002:int",{kind:"scalar",resolve:zi,construct:Ji,predicate:Xi,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Zi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function er(e){return!(e===null||!Zi.test(e)||e[e.length-1]==="_")}function nr(e){var n,i;return n=e.replace(/_/g,"").toLowerCase(),i=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:i*parseFloat(n,10)}var ir=/^[-+]?[0-9]+e/;function rr(e,n){var i;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(N.isNegativeZero(e))return"-0.0";return i=e.toString(10),ir.test(i)?i.replace("e",".e"):i}function tr(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||N.isNegativeZero(e))}var Nn=new R("tag:yaml.org,2002:float",{kind:"scalar",resolve:er,construct:nr,predicate:tr,represent:rr,defaultStyle:"lowercase"}),Mn=In.extend({implicit:[Fn,Ln,Dn,Nn]}),Rn=Mn,Pn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function or(e){return e===null?!1:Pn.exec(e)!==null||Bn.exec(e)!==null}function lr(e){var n,i,t,r,l,o,s,a=0,c=null,p,u,f;if(n=Pn.exec(e),n===null&&(n=Bn.exec(e)),n===null)throw new Error("Date resolve error");if(i=+n[1],t=+n[2]-1,r=+n[3],!n[4])return new Date(Date.UTC(i,t,r));if(l=+n[4],o=+n[5],s=+n[6],n[7]){for(a=n[7].slice(0,3);a.length<3;)a+="0";a=+a}return n[9]&&(p=+n[10],u=+(n[11]||0),c=(p*60+u)*6e4,n[9]==="-"&&(c=-c)),f=new Date(Date.UTC(i,t,r,l,o,s,a)),c&&f.setTime(f.getTime()-c),f}function sr(e){return e.toISOString()}var $n=new R("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:or,construct:lr,instanceOf:Date,represent:sr});function ar(e){return e==="<<"||e===null}var Un=new R("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ar}),Ye=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cr(e){if(e===null)return!1;var n,i,t=0,r=e.length,l=Ye;for(i=0;i<r;i++)if(n=l.indexOf(e.charAt(i)),!(n>64)){if(n<0)return!1;t+=6}return t%8===0}function ur(e){var n,i,t=e.replace(/[\r\n=]/g,""),r=t.length,l=Ye,o=0,s=[];for(n=0;n<r;n++)n%4===0&&n&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|l.indexOf(t.charAt(n));return i=r%4*6,i===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):i===18?(s.push(o>>10&255),s.push(o>>2&255)):i===12&&s.push(o>>4&255),new Uint8Array(s)}function pr(e){var n="",i=0,t,r,l=e.length,o=Ye;for(t=0;t<l;t++)t%3===0&&t&&(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]),i=(i<<8)+e[t];return r=l%3,r===0?(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]):r===2?(n+=o[i>>10&63],n+=o[i>>4&63],n+=o[i<<2&63],n+=o[64]):r===1&&(n+=o[i>>2&63],n+=o[i<<4&63],n+=o[64],n+=o[64]),n}function fr(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Yn=new R("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cr,construct:ur,predicate:fr,represent:pr}),dr=Object.prototype.hasOwnProperty,hr=Object.prototype.toString;function gr(e){if(e===null)return!0;var n=[],i,t,r,l,o,s=e;for(i=0,t=s.length;i<t;i+=1){if(r=s[i],o=!1,hr.call(r)!=="[object Object]")return!1;for(l in r)if(dr.call(r,l))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(l)===-1)n.push(l);else return!1}return!0}function mr(e){return e!==null?e:[]}var jn=new R("tag:yaml.org,2002:omap",{kind:"sequence",resolve:gr,construct:mr}),xr=Object.prototype.toString;function yr(e){if(e===null)return!0;var n,i,t,r,l,o=e;for(l=new Array(o.length),n=0,i=o.length;n<i;n+=1){if(t=o[n],xr.call(t)!=="[object Object]"||(r=Object.keys(t),r.length!==1))return!1;l[n]=[r[0],t[r[0]]]}return!0}function vr(e){if(e===null)return[];var n,i,t,r,l,o=e;for(l=new Array(o.length),n=0,i=o.length;n<i;n+=1)t=o[n],r=Object.keys(t),l[n]=[r[0],t[r[0]]];return l}var Hn=new R("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:yr,construct:vr}),wr=Object.prototype.hasOwnProperty;function br(e){if(e===null)return!0;var n,i=e;for(n in i)if(wr.call(i,n)&&i[n]!==null)return!1;return!0}function Ar(e){return e!==null?e:{}}var Kn=new R("tag:yaml.org,2002:set",{kind:"mapping",resolve:br,construct:Ar}),je=Rn.extend({implicit:[$n,Un],explicit:[Yn,jn,Hn,Kn]}),z=Object.prototype.hasOwnProperty,we=1,Gn=2,Wn=3,be=4,Me=1,Er=2,un=3,Cr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Sr=/[\x85\u2028\u2029]/,kr=/[,\[\]\{\}]/,qn=/^(?:!|!!|![a-z\-]+!)$/i,Vn=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function pn(e){return Object.prototype.toString.call(e)}function q(e){return e===10||e===13}function X(e){return e===9||e===32}function U(e){return e===9||e===32||e===10||e===13}function te(e){return e===44||e===91||e===93||e===123||e===125}function Tr(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function _r(e){return e===120?2:e===117?4:e===85?8:0}function Or(e){return 48<=e&&e<=57?e-48:-1}function fn(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Ir(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Qn=new Array(256),zn=new Array(256);for(J=0;J<256;J++)Qn[J]=fn(J)?1:0,zn[J]=fn(J);var J;function Fr(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||je,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Jn(e,n){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=Mi(i),new $(n,i)}function h(e,n){throw Jn(e,n)}function Ae(e,n){e.onWarning&&e.onWarning.call(null,Jn(e,n))}var dn={YAML:function(n,i,t){var r,l,o;n.version!==null&&h(n,"duplication of %YAML directive"),t.length!==1&&h(n,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(t[0]),r===null&&h(n,"ill-formed argument of the YAML directive"),l=parseInt(r[1],10),o=parseInt(r[2],10),l!==1&&h(n,"unacceptable YAML version of the document"),n.version=t[0],n.checkLineBreaks=o<2,o!==1&&o!==2&&Ae(n,"unsupported YAML version of the document")},TAG:function(n,i,t){var r,l;t.length!==2&&h(n,"TAG directive accepts exactly two arguments"),r=t[0],l=t[1],qn.test(r)||h(n,"ill-formed tag handle (first argument) of the TAG directive"),z.call(n.tagMap,r)&&h(n,'there is a previously declared suffix for "'+r+'" tag handle'),Vn.test(l)||h(n,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{h(n,"tag prefix is malformed: "+l)}n.tagMap[r]=l}};function Q(e,n,i,t){var r,l,o,s;if(n<i){if(s=e.input.slice(n,i),t)for(r=0,l=s.length;r<l;r+=1)o=s.charCodeAt(r),o===9||32<=o&&o<=1114111||h(e,"expected valid JSON character");else Cr.test(s)&&h(e,"the stream contains non-printable characters");e.result+=s}}function hn(e,n,i,t){var r,l,o,s;for(N.isObject(i)||h(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(i),o=0,s=r.length;o<s;o+=1)l=r[o],z.call(n,l)||(n[l]=i[l],t[l]=!0)}function oe(e,n,i,t,r,l,o,s,a){var c,p;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),c=0,p=r.length;c<p;c+=1)Array.isArray(r[c])&&h(e,"nested arrays are not supported inside keys"),typeof r=="object"&&pn(r[c])==="[object Object]"&&(r[c]="[object Object]");if(typeof r=="object"&&pn(r)==="[object Object]"&&(r="[object Object]"),r=String(r),n===null&&(n={}),t==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(c=0,p=l.length;c<p;c+=1)hn(e,n,l[c],i);else hn(e,n,l,i);else!e.json&&!z.call(i,r)&&z.call(n,r)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=a||e.position,h(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(n,r,{configurable:!0,enumerable:!0,writable:!0,value:l}):n[r]=l,delete i[r];return n}function He(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):h(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function F(e,n,i){for(var t=0,r=e.input.charCodeAt(e.position);r!==0;){for(;X(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(n&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(q(r))for(He(e),r=e.input.charCodeAt(e.position),t++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return i!==-1&&t!==0&&e.lineIndent<i&&Ae(e,"deficient indentation"),t}function Se(e){var n=e.position,i;return i=e.input.charCodeAt(n),!!((i===45||i===46)&&i===e.input.charCodeAt(n+1)&&i===e.input.charCodeAt(n+2)&&(n+=3,i=e.input.charCodeAt(n),i===0||U(i)))}function Ke(e,n){n===1?e.result+=" ":n>1&&(e.result+=N.repeat(`
`,n-1))}function Lr(e,n,i){var t,r,l,o,s,a,c,p,u=e.kind,f=e.result,d;if(d=e.input.charCodeAt(e.position),U(d)||te(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(r=e.input.charCodeAt(e.position+1),U(r)||i&&te(r)))return!1;for(e.kind="scalar",e.result="",l=o=e.position,s=!1;d!==0;){if(d===58){if(r=e.input.charCodeAt(e.position+1),U(r)||i&&te(r))break}else if(d===35){if(t=e.input.charCodeAt(e.position-1),U(t))break}else{if(e.position===e.lineStart&&Se(e)||i&&te(d))break;if(q(d))if(a=e.line,c=e.lineStart,p=e.lineIndent,F(e,!1,-1),e.lineIndent>=n){s=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=a,e.lineStart=c,e.lineIndent=p;break}}s&&(Q(e,l,o,!1),Ke(e,e.line-a),l=o=e.position,s=!1),X(d)||(o=e.position+1),d=e.input.charCodeAt(++e.position)}return Q(e,l,o,!1),e.result?!0:(e.kind=u,e.result=f,!1)}function Dr(e,n){var i,t,r;if(i=e.input.charCodeAt(e.position),i!==39)return!1;for(e.kind="scalar",e.result="",e.position++,t=r=e.position;(i=e.input.charCodeAt(e.position))!==0;)if(i===39)if(Q(e,t,e.position,!0),i=e.input.charCodeAt(++e.position),i===39)t=e.position,e.position++,r=e.position;else return!0;else q(i)?(Q(e,t,r,!0),Ke(e,F(e,!1,n)),t=r=e.position):e.position===e.lineStart&&Se(e)?h(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);h(e,"unexpected end of the stream within a single quoted scalar")}function Nr(e,n){var i,t,r,l,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,i=t=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Q(e,i,e.position,!0),e.position++,!0;if(s===92){if(Q(e,i,e.position,!0),s=e.input.charCodeAt(++e.position),q(s))F(e,!1,n);else if(s<256&&Qn[s])e.result+=zn[s],e.position++;else if((o=_r(s))>0){for(r=o,l=0;r>0;r--)s=e.input.charCodeAt(++e.position),(o=Tr(s))>=0?l=(l<<4)+o:h(e,"expected hexadecimal character");e.result+=Ir(l),e.position++}else h(e,"unknown escape sequence");i=t=e.position}else q(s)?(Q(e,i,t,!0),Ke(e,F(e,!1,n)),i=t=e.position):e.position===e.lineStart&&Se(e)?h(e,"unexpected end of the document within a double quoted scalar"):(e.position++,t=e.position)}h(e,"unexpected end of the stream within a double quoted scalar")}function Mr(e,n){var i=!0,t,r,l,o=e.tag,s,a=e.anchor,c,p,u,f,d,y=Object.create(null),b,T,L,E;if(E=e.input.charCodeAt(e.position),E===91)p=93,d=!1,s=[];else if(E===123)p=125,d=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),E=e.input.charCodeAt(++e.position);E!==0;){if(F(e,!0,n),E=e.input.charCodeAt(e.position),E===p)return e.position++,e.tag=o,e.anchor=a,e.kind=d?"mapping":"sequence",e.result=s,!0;i?E===44&&h(e,"expected the node content, but found ','"):h(e,"missed comma between flow collection entries"),T=b=L=null,u=f=!1,E===63&&(c=e.input.charCodeAt(e.position+1),U(c)&&(u=f=!0,e.position++,F(e,!0,n))),t=e.line,r=e.lineStart,l=e.position,le(e,n,we,!1,!0),T=e.tag,b=e.result,F(e,!0,n),E=e.input.charCodeAt(e.position),(f||e.line===t)&&E===58&&(u=!0,E=e.input.charCodeAt(++e.position),F(e,!0,n),le(e,n,we,!1,!0),L=e.result),d?oe(e,s,y,T,b,L,t,r,l):u?s.push(oe(e,null,y,T,b,L,t,r,l)):s.push(b),F(e,!0,n),E=e.input.charCodeAt(e.position),E===44?(i=!0,E=e.input.charCodeAt(++e.position)):i=!1}h(e,"unexpected end of the stream within a flow collection")}function Rr(e,n){var i,t,r=Me,l=!1,o=!1,s=n,a=0,c=!1,p,u;if(u=e.input.charCodeAt(e.position),u===124)t=!1;else if(u===62)t=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)Me===r?r=u===43?un:Er:h(e,"repeat of a chomping mode identifier");else if((p=Or(u))>=0)p===0?h(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?h(e,"repeat of an indentation width identifier"):(s=n+p-1,o=!0);else break;if(X(u)){do u=e.input.charCodeAt(++e.position);while(X(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!q(u)&&u!==0)}for(;u!==0;){for(He(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),q(u)){a++;continue}if(e.lineIndent<s){r===un?e.result+=N.repeat(`
`,l?1+a:a):r===Me&&l&&(e.result+=`
`);break}for(t?X(u)?(c=!0,e.result+=N.repeat(`
`,l?1+a:a)):c?(c=!1,e.result+=N.repeat(`
`,a+1)):a===0?l&&(e.result+=" "):e.result+=N.repeat(`
`,a):e.result+=N.repeat(`
`,l?1+a:a),l=!0,o=!0,a=0,i=e.position;!q(u)&&u!==0;)u=e.input.charCodeAt(++e.position);Q(e,i,e.position,!1)}return!0}function gn(e,n){var i,t=e.tag,r=e.anchor,l=[],o,s=!1,a;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),a=e.input.charCodeAt(e.position);a!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,h(e,"tab characters must not be used in indentation")),!(a!==45||(o=e.input.charCodeAt(e.position+1),!U(o))));){if(s=!0,e.position++,F(e,!0,-1)&&e.lineIndent<=n){l.push(null),a=e.input.charCodeAt(e.position);continue}if(i=e.line,le(e,n,Wn,!1,!0),l.push(e.result),F(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>n)&&a!==0)h(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return s?(e.tag=t,e.anchor=r,e.kind="sequence",e.result=l,!0):!1}function Pr(e,n,i){var t,r,l,o,s,a,c=e.tag,p=e.anchor,u={},f=Object.create(null),d=null,y=null,b=null,T=!1,L=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),E=e.input.charCodeAt(e.position);E!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,h(e,"tab characters must not be used in indentation")),t=e.input.charCodeAt(e.position+1),l=e.line,(E===63||E===58)&&U(t))E===63?(T&&(oe(e,u,f,d,y,null,o,s,a),d=y=b=null),L=!0,T=!0,r=!0):T?(T=!1,r=!0):h(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=t;else{if(o=e.line,s=e.lineStart,a=e.position,!le(e,i,Gn,!1,!0))break;if(e.line===l){for(E=e.input.charCodeAt(e.position);X(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),U(E)||h(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(oe(e,u,f,d,y,null,o,s,a),d=y=b=null),L=!0,T=!1,r=!1,d=e.tag,y=e.result;else if(L)h(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=p,!0}else if(L)h(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=p,!0}if((e.line===l||e.lineIndent>n)&&(T&&(o=e.line,s=e.lineStart,a=e.position),le(e,n,be,!0,r)&&(T?y=e.result:b=e.result),T||(oe(e,u,f,d,y,b,o,s,a),d=y=b=null),F(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>n)&&E!==0)h(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return T&&oe(e,u,f,d,y,null,o,s,a),L&&(e.tag=c,e.anchor=p,e.kind="mapping",e.result=u),L}function Br(e){var n,i=!1,t=!1,r,l,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&h(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(i=!0,o=e.input.charCodeAt(++e.position)):o===33?(t=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",n=e.position,i){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(l=e.input.slice(n,e.position),o=e.input.charCodeAt(++e.position)):h(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!U(o);)o===33&&(t?h(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(n-1,e.position+1),qn.test(r)||h(e,"named tag handle cannot contain such characters"),t=!0,n=e.position+1)),o=e.input.charCodeAt(++e.position);l=e.input.slice(n,e.position),kr.test(l)&&h(e,"tag suffix cannot contain flow indicator characters")}l&&!Vn.test(l)&&h(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{h(e,"tag name is malformed: "+l)}return i?e.tag=l:z.call(e.tagMap,r)?e.tag=e.tagMap[r]+l:r==="!"?e.tag="!"+l:r==="!!"?e.tag="tag:yaml.org,2002:"+l:h(e,'undeclared tag handle "'+r+'"'),!0}function $r(e){var n,i;if(i=e.input.charCodeAt(e.position),i!==38)return!1;for(e.anchor!==null&&h(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!U(i)&&!te(i);)i=e.input.charCodeAt(++e.position);return e.position===n&&h(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function Ur(e){var n,i,t;if(t=e.input.charCodeAt(e.position),t!==42)return!1;for(t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!U(t)&&!te(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&h(e,"name of an alias node must contain at least one character"),i=e.input.slice(n,e.position),z.call(e.anchorMap,i)||h(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],F(e,!0,-1),!0}function le(e,n,i,t,r){var l,o,s,a=1,c=!1,p=!1,u,f,d,y,b,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=o=s=be===i||Wn===i,t&&F(e,!0,-1)&&(c=!0,e.lineIndent>n?a=1:e.lineIndent===n?a=0:e.lineIndent<n&&(a=-1)),a===1)for(;Br(e)||$r(e);)F(e,!0,-1)?(c=!0,s=l,e.lineIndent>n?a=1:e.lineIndent===n?a=0:e.lineIndent<n&&(a=-1)):s=!1;if(s&&(s=c||r),(a===1||be===i)&&(we===i||Gn===i?b=n:b=n+1,T=e.position-e.lineStart,a===1?s&&(gn(e,T)||Pr(e,T,b))||Mr(e,b)?p=!0:(o&&Rr(e,b)||Dr(e,b)||Nr(e,b)?p=!0:Ur(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&h(e,"alias node should not have any properties")):Lr(e,b,we===i)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(p=s&&gn(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&h(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,f=e.implicitTypes.length;u<f;u+=1)if(y=e.implicitTypes[u],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(z.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,d=e.typeMap.multi[e.kind||"fallback"],u=0,f=d.length;u<f;u+=1)if(e.tag.slice(0,d[u].tag.length)===d[u].tag){y=d[u];break}y||h(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&h(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):h(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}function Yr(e){var n=e.position,i,t,r,l=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(F(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(l=!0,o=e.input.charCodeAt(++e.position),i=e.position;o!==0&&!U(o);)o=e.input.charCodeAt(++e.position);for(t=e.input.slice(i,e.position),r=[],t.length<1&&h(e,"directive name must not be less than one character in length");o!==0;){for(;X(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!q(o));break}if(q(o))break;for(i=e.position;o!==0&&!U(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(i,e.position))}o!==0&&He(e),z.call(dn,t)?dn[t](e,t,r):Ae(e,'unknown document directive "'+t+'"')}if(F(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,F(e,!0,-1)):l&&h(e,"directives end mark is expected"),le(e,e.lineIndent-1,be,!1,!0),F(e,!0,-1),e.checkLineBreaks&&Sr.test(e.input.slice(n,e.position))&&Ae(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Se(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,F(e,!0,-1));return}if(e.position<e.length-1)h(e,"end of the stream or a document separator is expected");else return}function Xn(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var i=new Fr(e,n),t=e.indexOf("\0");for(t!==-1&&(i.position=t,h(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Yr(i);return i.documents}function jr(e,n,i){n!==null&&typeof n=="object"&&typeof i>"u"&&(i=n,n=null);var t=Xn(e,i);if(typeof n!="function")return t;for(var r=0,l=t.length;r<l;r+=1)n(t[r])}function Hr(e,n){var i=Xn(e,n);if(i.length!==0){if(i.length===1)return i[0];throw new $("expected a single document in the stream, but found more")}}var Kr=jr,Gr=Hr,Zn={loadAll:Kr,load:Gr},ei=Object.prototype.toString,ni=Object.prototype.hasOwnProperty,Ge=65279,Wr=9,pe=10,qr=13,Vr=32,Qr=33,zr=34,Pe=35,Jr=37,Xr=38,Zr=39,et=42,ii=44,nt=45,Ee=58,it=61,rt=62,tt=63,ot=64,ri=91,ti=93,lt=96,oi=123,st=124,li=125,B={};B[0]="\\0";B[7]="\\a";B[8]="\\b";B[9]="\\t";B[10]="\\n";B[11]="\\v";B[12]="\\f";B[13]="\\r";B[27]="\\e";B[34]='\\"';B[92]="\\\\";B[133]="\\N";B[160]="\\_";B[8232]="\\L";B[8233]="\\P";var at=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ct=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ut(e,n){var i,t,r,l,o,s,a;if(n===null)return{};for(i={},t=Object.keys(n),r=0,l=t.length;r<l;r+=1)o=t[r],s=String(n[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),a=e.compiledTypeMap.fallback[o],a&&ni.call(a.styleAliases,s)&&(s=a.styleAliases[s]),i[o]=s;return i}function pt(e){var n,i,t;if(n=e.toString(16).toUpperCase(),e<=255)i="x",t=2;else if(e<=65535)i="u",t=4;else if(e<=4294967295)i="U",t=8;else throw new $("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+N.repeat("0",t-n.length)+n}var ft=1,fe=2;function dt(e){this.schema=e.schema||je,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=N.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ut(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?fe:ft,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mn(e,n){for(var i=N.repeat(" ",n),t=0,r=-1,l="",o,s=e.length;t<s;)r=e.indexOf(`
`,t),r===-1?(o=e.slice(t),t=s):(o=e.slice(t,r+1),t=r+1),o.length&&o!==`
`&&(l+=i),l+=o;return l}function Be(e,n){return`
`+N.repeat(" ",e.indent*n)}function ht(e,n){var i,t,r;for(i=0,t=e.implicitTypes.length;i<t;i+=1)if(r=e.implicitTypes[i],r.resolve(n))return!0;return!1}function Ce(e){return e===Vr||e===Wr}function de(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ge||65536<=e&&e<=1114111}function xn(e){return de(e)&&e!==Ge&&e!==qr&&e!==pe}function yn(e,n,i){var t=xn(e),r=t&&!Ce(e);return(i?t:t&&e!==ii&&e!==ri&&e!==ti&&e!==oi&&e!==li)&&e!==Pe&&!(n===Ee&&!r)||xn(n)&&!Ce(n)&&e===Pe||n===Ee&&r}function gt(e){return de(e)&&e!==Ge&&!Ce(e)&&e!==nt&&e!==tt&&e!==Ee&&e!==ii&&e!==ri&&e!==ti&&e!==oi&&e!==li&&e!==Pe&&e!==Xr&&e!==et&&e!==Qr&&e!==st&&e!==it&&e!==rt&&e!==Zr&&e!==zr&&e!==Jr&&e!==ot&&e!==lt}function mt(e){return!Ce(e)&&e!==Ee}function ce(e,n){var i=e.charCodeAt(n),t;return i>=55296&&i<=56319&&n+1<e.length&&(t=e.charCodeAt(n+1),t>=56320&&t<=57343)?(i-55296)*1024+t-56320+65536:i}function si(e){var n=/^\n* /;return n.test(e)}var ai=1,$e=2,ci=3,ui=4,re=5;function xt(e,n,i,t,r,l,o,s){var a,c=0,p=null,u=!1,f=!1,d=t!==-1,y=-1,b=gt(ce(e,0))&&mt(ce(e,e.length-1));if(n||o)for(a=0;a<e.length;c>=65536?a+=2:a++){if(c=ce(e,a),!de(c))return re;b=b&&yn(c,p,s),p=c}else{for(a=0;a<e.length;c>=65536?a+=2:a++){if(c=ce(e,a),c===pe)u=!0,d&&(f=f||a-y-1>t&&e[y+1]!==" ",y=a);else if(!de(c))return re;b=b&&yn(c,p,s),p=c}f=f||d&&a-y-1>t&&e[y+1]!==" "}return!u&&!f?b&&!o&&!r(e)?ai:l===fe?re:$e:i>9&&si(e)?re:o?l===fe?re:$e:f?ui:ci}function yt(e,n,i,t,r){e.dump=function(){if(n.length===0)return e.quotingType===fe?'""':"''";if(!e.noCompatMode&&(at.indexOf(n)!==-1||ct.test(n)))return e.quotingType===fe?'"'+n+'"':"'"+n+"'";var l=e.indent*Math.max(1,i),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),s=t||e.flowLevel>-1&&i>=e.flowLevel;function a(c){return ht(e,c)}switch(xt(n,s,e.indent,o,a,e.quotingType,e.forceQuotes&&!t,r)){case ai:return n;case $e:return"'"+n.replace(/'/g,"''")+"'";case ci:return"|"+vn(n,e.indent)+wn(mn(n,l));case ui:return">"+vn(n,e.indent)+wn(mn(vt(n,o),l));case re:return'"'+wt(n)+'"';default:throw new $("impossible error: invalid scalar style")}}()}function vn(e,n){var i=si(e)?String(n):"",t=e[e.length-1]===`
`,r=t&&(e[e.length-2]===`
`||e===`
`),l=r?"+":t?"":"-";return i+l+`
`}function wn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function vt(e,n){for(var i=/(\n+)([^\n]*)/g,t=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,i.lastIndex=c,bn(e.slice(0,c),n)}(),r=e[0]===`
`||e[0]===" ",l,o;o=i.exec(e);){var s=o[1],a=o[2];l=a[0]===" ",t+=s+(!r&&!l&&a!==""?`
`:"")+bn(a,n),r=l}return t}function bn(e,n){if(e===""||e[0]===" ")return e;for(var i=/ [^ ]/g,t,r=0,l,o=0,s=0,a="";t=i.exec(e);)s=t.index,s-r>n&&(l=o>r?o:s,a+=`
`+e.slice(r,l),r=l+1),o=s;return a+=`
`,e.length-r>n&&o>r?a+=e.slice(r,o)+`
`+e.slice(o+1):a+=e.slice(r),a.slice(1)}function wt(e){for(var n="",i=0,t,r=0;r<e.length;i>=65536?r+=2:r++)i=ce(e,r),t=B[i],!t&&de(i)?(n+=e[r],i>=65536&&(n+=e[r+1])):n+=t||pt(i);return n}function bt(e,n,i){var t="",r=e.tag,l,o,s;for(l=0,o=i.length;l<o;l+=1)s=i[l],e.replacer&&(s=e.replacer.call(i,String(l),s)),(V(e,n,s,!1,!1)||typeof s>"u"&&V(e,n,null,!1,!1))&&(t!==""&&(t+=","+(e.condenseFlow?"":" ")),t+=e.dump);e.tag=r,e.dump="["+t+"]"}function An(e,n,i,t){var r="",l=e.tag,o,s,a;for(o=0,s=i.length;o<s;o+=1)a=i[o],e.replacer&&(a=e.replacer.call(i,String(o),a)),(V(e,n+1,a,!0,!0,!1,!0)||typeof a>"u"&&V(e,n+1,null,!0,!0,!1,!0))&&((!t||r!=="")&&(r+=Be(e,n)),e.dump&&pe===e.dump.charCodeAt(0)?r+="-":r+="- ",r+=e.dump);e.tag=l,e.dump=r||"[]"}function At(e,n,i){var t="",r=e.tag,l=Object.keys(i),o,s,a,c,p;for(o=0,s=l.length;o<s;o+=1)p="",t!==""&&(p+=", "),e.condenseFlow&&(p+='"'),a=l[o],c=i[a],e.replacer&&(c=e.replacer.call(i,a,c)),V(e,n,a,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),V(e,n,c,!1,!1)&&(p+=e.dump,t+=p));e.tag=r,e.dump="{"+t+"}"}function Et(e,n,i,t){var r="",l=e.tag,o=Object.keys(i),s,a,c,p,u,f;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new $("sortKeys must be a boolean or a function");for(s=0,a=o.length;s<a;s+=1)f="",(!t||r!=="")&&(f+=Be(e,n)),c=o[s],p=i[c],e.replacer&&(p=e.replacer.call(i,c,p)),V(e,n+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&pe===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,u&&(f+=Be(e,n)),V(e,n+1,p,!0,u)&&(e.dump&&pe===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,r+=f));e.tag=l,e.dump=r||"{}"}function En(e,n,i){var t,r,l,o,s,a;for(r=i?e.explicitTypes:e.implicitTypes,l=0,o=r.length;l<o;l+=1)if(s=r[l],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof n=="object"&&n instanceof s.instanceOf)&&(!s.predicate||s.predicate(n))){if(i?s.multi&&s.representName?e.tag=s.representName(n):e.tag=s.tag:e.tag="?",s.represent){if(a=e.styleMap[s.tag]||s.defaultStyle,ei.call(s.represent)==="[object Function]")t=s.represent(n,a);else if(ni.call(s.represent,a))t=s.represent[a](n,a);else throw new $("!<"+s.tag+'> tag resolver accepts not "'+a+'" style');e.dump=t}return!0}return!1}function V(e,n,i,t,r,l,o){e.tag=null,e.dump=i,En(e,i,!1)||En(e,i,!0);var s=ei.call(e.dump),a=t,c;t&&(t=e.flowLevel<0||e.flowLevel>n);var p=s==="[object Object]"||s==="[object Array]",u,f;if(p&&(u=e.duplicates.indexOf(i),f=u!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&n>0)&&(r=!1),f&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(p&&f&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),s==="[object Object]")t&&Object.keys(e.dump).length!==0?(Et(e,n,e.dump,r),f&&(e.dump="&ref_"+u+e.dump)):(At(e,n,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object Array]")t&&e.dump.length!==0?(e.noArrayIndent&&!o&&n>0?An(e,n-1,e.dump,r):An(e,n,e.dump,r),f&&(e.dump="&ref_"+u+e.dump)):(bt(e,n,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&yt(e,e.dump,n,l,a);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new $("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Ct(e,n){var i=[],t=[],r,l;for(Ue(e,i,t),r=0,l=t.length;r<l;r+=1)n.duplicates.push(i[t[r]]);n.usedDuplicates=new Array(l)}function Ue(e,n,i){var t,r,l;if(e!==null&&typeof e=="object")if(r=n.indexOf(e),r!==-1)i.indexOf(r)===-1&&i.push(r);else if(n.push(e),Array.isArray(e))for(r=0,l=e.length;r<l;r+=1)Ue(e[r],n,i);else for(t=Object.keys(e),r=0,l=t.length;r<l;r+=1)Ue(e[t[r]],n,i)}function St(e,n){n=n||{};var i=new dt(n);i.noRefs||Ct(e,i);var t=e;return i.replacer&&(t=i.replacer.call({"":t},"",t)),V(i,0,t,!0,!0)?i.dump+`
`:""}var kt=St,Tt={dump:kt};function We(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var _t=R,Ot=kn,It=In,Ft=Mn,Lt=Rn,Dt=je,Nt=Zn.load,Mt=Zn.loadAll,Rt=Tt.dump,Pt=$,Bt={binary:Yn,float:Nn,map:On,null:Fn,pairs:Hn,set:Kn,timestamp:$n,bool:Ln,int:Dn,merge:Un,omap:jn,seq:_n,str:Tn},$t=We("safeLoad","load"),Ut=We("safeLoadAll","loadAll"),Yt=We("safeDump","dump"),jt={Type:_t,Schema:Ot,FAILSAFE_SCHEMA:It,JSON_SCHEMA:Ft,CORE_SCHEMA:Lt,DEFAULT_SCHEMA:Dt,load:Nt,loadAll:Mt,dump:Rt,YAMLException:Pt,types:Bt,safeLoad:$t,safeLoadAll:Ut,safeDump:Yt},pi=jt;function qe(e){let n=pi.load(e),i={};if(!n||typeof n!="object")return i;let t=Array.isArray(n.matches)?n.matches:[];for(let r of t){if(!r)continue;let l=r.replace??r.replace_text??r.output;if(typeof l=="string"){if(typeof r.trigger=="string"){let o=fi(r.trigger);o&&(i[o]=l)}if(Array.isArray(r.triggers))for(let o of r.triggers){if(typeof o!="string")continue;let s=fi(o);s&&(i[s]=l)}}}return i}function fi(e){return e.replace(/^:+/,"").trim()}var Ht=`matches:
  - trigger: ":code"
    replace: "\\\`\\\`\\\`$|\\n\\\`\\\`\\\`"
  - trigger: ":todo"
    replace: "- [ ] $|"
  - trigger: ":quote"
    replace: "> $|"
`,Kt=`matches:
  - trigger: ":note"
    replace: "> [!note] $|\\n> "
  - trigger: ":tip"
    replace: "> [!tip] $|\\n> "
  - trigger: ":info"
    replace: "> [!info] $|\\n> "
  - trigger: ":warn"
    replace: "> [!warning] $|\\n> "
  - trigger: ":danger"
    replace: "> [!danger] $|\\n> "
  - trigger: ":quote-callout"
    replace: "> [!quote]\\n> $|"
`,Gt=`matches:
  - trigger: ":tbl3"
    replace: "| Header | Header | Header |\\n| --- | --- | --- |\\n| $| | | |"
  - trigger: ":tbl2"
    replace: "| H1 | H2 |\\n| --- | --- |\\n| $| | |"
`,Wt=`matches:
  - triggers: [":rarrow", ":->"]
    replace: "\u2192"
  - triggers: [":larrow", ":<-"]
    replace: "\u2190"
  - trigger: ":uparrow"
    replace: "\u2191"
  - trigger: ":downarrow"
    replace: "\u2193"
  - trigger: ":dblarrow"
    replace: "\u2194"
`,qt=`matches:
  - trigger: ":pm"
    replace: "\xB1"
  - trigger: ":times"
    replace: "\xD7"
  - trigger: ":div"
    replace: "\xF7"
  - trigger: ":le"
    replace: "\u2264"
  - trigger: ":ge"
    replace: "\u2265"
  - trigger: ":neq"
    replace: "\u2260"
  - trigger: ":approx"
    replace: "\u2248"
  - trigger: ":deg"
    replace: "\xB0"
  - trigger: ":mu"
    replace: "\xB5"
  - trigger: ":inf"
    replace: "\u221E"
`,Vt=`matches:
  - trigger: ":shrug"
    replace: "\xAF\\\\_(\u30C4)_/\xAF"
  - trigger: ":tableflip"
    replace: "(\u256F\xB0\u25A1\xB0\uFF09\u256F\uFE35 \u253B\u2501\u253B"
  - trigger: ":unflip"
    replace: "\u252C\u2500\u252C \u30CE( \u309C-\u309C\u30CE )"
`,se=[{id:"builtin-callouts",label:"Obsidian Callouts (builtin)",kind:"builtin",yaml:Kt},{id:"builtin-markdown",label:"Markdown basics (builtin)",kind:"builtin",yaml:Ht},{id:"builtin-tables",label:"Markdown tables (builtin)",kind:"builtin",yaml:Gt},{id:"builtin-arrows",label:"Unicode arrows (builtin)",kind:"builtin",yaml:Wt},{id:"builtin-math-lite",label:"Math symbols (lite, builtin)",kind:"builtin",yaml:qt},{id:"builtin-kaomoji-lite",label:"Kaomoji (lite, builtin)",kind:"builtin",yaml:Vt}];function di(e,n){let i=[],t=[];for(let[r,l]of Object.entries(e))n[r]===void 0?i.push({key:r,value:l}):t.push({key:r,incoming:l,current:n[r]});return{added:i,conflicts:t}}function hi(e){if(!e||typeof e!="object")return!1;for(let[n,i]of Object.entries(e))if(typeof n!="string"||typeof i!="string")return!1;return!0}function gi(e){return e.trim()}function Ve(e){return/[\s.,!?;:()\[\]{}"'\-\\/]/.test(e)||e.length===0}function Z(e){let n=e.indexOf("/");return n===-1?{group:"",name:e}:{group:e.slice(0,n),name:e.slice(n+1)}}function mi(e,n){return e?`${e}/${n}`:n}function ee(e){return(e||"").trim().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase()}function ne(e){return(e.includes("/")?e.split("/",1)[0]:e).replace(/[-_]+/g," ").replace(/\b\w/g,i=>i.toUpperCase())}var _e=Fe("obsidian");var he=class extends _e.Modal{text;title;onApply;constructor(n,i,t="JSON"){super(n),this.text=i,this.title=t}onOpen(){let{contentEl:n,titleEl:i}=this;i.setText(this.title),n.addClass("snipsidian-modal");let t=n.createEl("textarea",{text:this.text});t.style.width="100%",t.style.height="300px";let r=n.createDiv({cls:"modal-button-container"}),l=r.createEl("button",{text:"Apply"});l.onclick=()=>{this.onApply?.(t.value),this.close()};let o=r.createEl("button",{text:"Close"});o.onclick=()=>this.close()}},ke=class extends _e.Modal{plugin;titleText;diff;choices=new Map;onConfirm;constructor(n,i,t,r){super(n),this.plugin=i,this.titleText=t,this.diff=r;for(let l of r.conflicts)this.choices.set(l.key,"keep")}onOpen(){let{contentEl:n,titleEl:i}=this;if(i.setText(this.titleText),n.createDiv().createEl("p",{text:`Will add ${this.diff.added.length} new snippet(s). Conflicts: ${this.diff.conflicts.length}.`}),this.diff.conflicts.length){n.createEl("h4",{text:"Conflicts"});let s=n.createEl("table",{cls:"snipsidian-preview-table"}),c=s.createEl("thead").createEl("tr");["Trigger","Current","Incoming","Action"].forEach(y=>c.createEl("th",{text:y}));let p=s.createEl("tbody");for(let y of this.diff.conflicts){let b=p.createEl("tr");b.createEl("td",{text:y.key}),b.createEl("td",{text:y.current}),b.createEl("td",{text:y.incoming});let L=b.createEl("td",{cls:"conflict-action"}).createEl("select");L.append(new Option("Keep current","keep"),new Option("Overwrite","overwrite")),L.value=this.choices.get(y.key)??"keep",L.onchange=()=>this.choices.set(y.key,L.value)}let u=n.createDiv({cls:"snipsidian-bulk-actions"}),f=u.createEl("button",{text:"Keep all current"});f.onclick=()=>{for(let y of this.choices.keys())this.choices.set(y,"keep");this.close(),this.open()};let d=u.createEl("button",{text:"Overwrite all"});d.onclick=()=>{for(let y of this.choices.keys())this.choices.set(y,"overwrite");this.close(),this.open()}}let r=n.createDiv({cls:"modal-button-container"}),l=r.createEl("button",{text:"Cancel"});l.onclick=()=>this.close();let o=r.createEl("button",{text:"Apply"});o.onclick=()=>{let s={...this.plugin.settings.snippets};for(let a of this.diff.added)s[a.key]=a.value;for(let a of this.diff.conflicts){let c=this.choices.get(a.key)??"keep";s[a.key]=c==="overwrite"?a.incoming:a.current}this.onConfirm?.(s),this.close()}}},Te=class extends _e.Modal{titleText;groups;allowUngrouped;onSubmit;constructor(n,i){super(n),this.titleText=i.title,this.groups=i.groups??[],this.allowUngrouped=!!i.allowUngrouped}onOpen(){let{contentEl:n,titleEl:i}=this;i.setText(this.titleText),n.addClass("snipsidian-modal");let t=n.createDiv({cls:"snipsidian-move-form"}),r=t.createEl("select");this.allowUngrouped&&r.append(new Option("Ungrouped",""));for(let p of this.groups)r.append(new Option(ne(p),p));r.append(new Option("New group\u2026","__new__"));let l=t.createDiv({cls:"snipsidian-newgroup-wrap"}),o=l.createEl("input",{type:"text",placeholder:"New group name"});l.hide(),r.onchange=()=>{r.value==="__new__"?l.show():l.hide()};let s=n.createDiv({cls:"modal-button-container"}),a=s.createEl("button",{text:"Cancel"});a.onclick=()=>this.close();let c=s.createEl("button",{text:"Move"});c.onclick=()=>{let p=r.value;if(p==="__new__"){let u=o.value.trim();p=ee(u)||""}this.onSubmit?.(p),this.close()}}};var Oe=class extends v.PluginSettingTab{plugin;groupOpen=new Map;searchQuery="";selectionMode=!1;selected=new Set;constructor(n,i){super(n,i),this.plugin=i}ensureUiState(){let n=this.plugin.settings;n.ui||(n.ui={}),n.ui.groupOpen||(n.ui.groupOpen={})}loadOpenState(n,i=!0){this.ensureUiState();let t=this.plugin.settings.ui.groupOpen;return t[n]===void 0&&(t[n]=i),t[n]}saveOpenState(n,i){this.ensureUiState();let t=this.plugin.settings.ui.groupOpen;t[n]=i}allGroupsFrom(n){let i=new Set;for(let t of Object.keys(n)){let r=t.includes("/")?t.split("/",1)[0]:"Ungrouped";i.add(r)}return Array.from(i).sort((t,r)=>t.localeCompare(r))}safeRenameKey(n,i,t){if(i===t)return{ok:!0};if(t in n)return{ok:!1,reason:`Trigger "${t}" already exists`};let r=n[i];return r===void 0?{ok:!1,reason:"Original key missing"}:(delete n[i],n[t]=r,this.selected.has(i)&&(this.selected.delete(i),this.selected.add(t)),{ok:!0})}bulkMoveKeys(n,i){let t=this.plugin.settings.snippets,r=0,l=[];for(let s of i){let{name:a}=Z(s),c=n?`${n}/${a}`:a;if(c in t&&!i.includes(c)){r++;continue}l.push({oldKey:s,newKey:c})}let o=0;for(let{oldKey:s,newKey:a}of l){if(s===a)continue;this.safeRenameKey(t,s,a).ok?o++:r++}return{moved:o,skipped:r}}promptNewGroup(n=""){let i=window.prompt("Folder name (pretty label). Leave empty for Ungrouped:",n??"");return i===null?null:ee(i)||""}display(){let{containerEl:n}=this;n.empty(),n.addClass("snipsidian-settings"),n.createEl("h2",{text:"SnipSidian Settings"}),n.createEl("h3",{text:"Advanced"}),new v.Setting(n).setName("Export / Import").setDesc("Backup or restore snippets as JSON.").addButton(x=>x.setButtonText("Export JSON").onClick(async()=>{let g=JSON.stringify(this.plugin.settings.snippets,null,2);try{await navigator.clipboard.writeText(g),new v.Notice("Snippets copied to clipboard")}catch{new he(this.app,g,"Copy the JSON below").open()}})).addButton(x=>x.setButtonText("Import JSON").onClick(async()=>{let g=new he(this.app,JSON.stringify(this.plugin.settings.snippets,null,2),"Paste JSON and press Apply");g.onApply=async S=>{try{let m=JSON.parse(S);if(!hi(m)){new v.Notice("Invalid JSON: must be an object of { trigger: replacement } strings");return}let w=2e3;if(Object.keys(m).length>w){new v.Notice(`Too many snippets (>${w}).`);return}this.plugin.settings.snippets=m,await this.plugin.saveSettings(),this.display(),new v.Notice("Snippets imported")}catch(m){new v.Notice("Invalid JSON"),console.error(m)}},g.open()})),new v.Setting(n).setName("Add missing defaults").setDesc("Merge any new default snippets into your current list (user snippets are not overwritten).").addButton(x=>x.setButtonText("Apply").onClick(async()=>{let g=Object.keys(this.plugin.settings.snippets).length;this.plugin.settings.snippets={...ve,...this.plugin.settings.snippets},await this.plugin.saveSettings();let S=Object.keys(this.plugin.settings.snippets).length;new v.Notice(`Defaults merged (${S-g} added).`),this.display()})),new v.Setting(n).setName("Reload snippets").setDesc("Re-read data.json and refresh the UI.").addButton(x=>x.setButtonText("Reload").onClick(async()=>{await this.plugin.loadSettings(),await this.plugin.saveSettings(),this.display(),new v.Notice("Snippets reloaded")})),new v.Setting(n).setName("Reveal data.json").setDesc("Open the plugin data file in your file manager (desktop only).").addButton(x=>x.setButtonText("Reveal").onClick(async()=>{try{if(!v.Platform.isDesktopApp)throw new Error("Not desktop");let g=this.app.vault.adapter;if(typeof g.getBasePath!="function")throw new Error("Not supported on this platform");let m=`${g.getBasePath()}/.obsidian/plugins/snipsidian/data.json`,w=window.require?.("electron");if(!w?.shell?.showItemInFolder)throw new Error("Electron shell not available");w.shell.showItemInFolder(m)}catch(g){new v.Notice("Reveal unsupported on this platform. Use Export/Import instead."),console.warn(g)}})),n.createEl("h3",{text:"Packages (Espanso-compatible)"});let i=n.createDiv({cls:"snipsidian-help"}),t=i.createEl("p");t.appendText("Install ready-made text expansion packages compatible with "),t.createEl("a",{text:"Espanso Hub",href:"https://hub.espanso.org"}).setAttr("target","_blank"),t.appendText(". Use the built-in catalog below or paste YAML from the package's Source page.");let l=i.createEl("p");l.appendText("Note: Direct URL installs are disabled due to browser CORS restrictions. Open a package on the Hub \u2192 "),l.appendText("Source \u2192 copy the contents of "),l.appendText("package.yml"),l.appendText(" and paste it here.");let o=se[0]?.id??"",s=!1,a=!1,c=se.find(x=>x.id===o)?.label??"Package",p,u=new v.Setting(n).setName("Install from catalog").setDesc("Select a package and install it into a folder.");u.addDropdown(x=>{se.forEach(g=>x.addOption(g.id,g.label)),o&&x.setValue(o),x.onChange(g=>{o=g,a||(c=se.find(S=>S.id===g)?.label??"Package",p&&(p.value=c))})}),u.addText(x=>{x.setPlaceholder("Folder label (e.g. Obsidian Callouts)").setValue(c).onChange(g=>{a=!0,c=g}),p=x.inputEl}).setDesc("This label is shown in the UI; keys are stored under a slug derived from it."),u.addToggle(x=>x.setTooltip("Overwrite existing triggers (package values win on conflict)").setValue(s).onChange(g=>s=g)),u.addButton(x=>x.setButtonText("Install").setCta().setTooltip("Install the selected package").onClick(async()=>{let g=se.find(S=>S.id===o);if(!g){new v.Notice("Package not found");return}try{if(g.kind!=="builtin"){new v.Notice("Only built-in catalog items are supported here.");return}let S=g.yaml??"",m=qe(S),w=ee(c)||"package",I=Object.fromEntries(Object.entries(m).map(([H,G])=>[`${w}/${H}`,G]));await L(I,s)}catch(S){console.error(S),new v.Notice("Failed to install package")}}));let f="",d="",y=!1,b=new v.Setting(n).setName("Install from YAML").setDesc("Paste Espanso YAML here, choose a folder label, and click Install.");b.addText(x=>{x.setPlaceholder("Folder label (e.g. Obsidian Callouts)").onChange(g=>{d=g,T&&T.setDisabled(!d.trim())})}),b.addTextArea(x=>{x.setPlaceholder(`matches:
  - trigger: ":brb"
    replace: "be right back"
`),x.onChange(g=>f=g),x.inputEl.rows=6}),b.addToggle(x=>x.setTooltip("Overwrite existing triggers (incoming values win on conflict)").onChange(g=>y=g));let T=null;b.addButton(x=>{T=x,x.setButtonText("Install pasted YAML").setCta().setDisabled(!0).setTooltip("Convert pasted YAML and install into the chosen folder").onClick(async()=>{try{let g=d.trim();if(!g){new v.Notice("Please provide a folder label.");return}let S=qe(f||"");if(!Object.keys(S).length){new v.Notice("No snippets found in YAML.");return}let m=ee(g)||"package",w=Object.fromEntries(Object.entries(S).map(([I,H])=>[`${m}/${I}`,H]));await L(w,y)}catch(g){console.error(g),new v.Notice("Failed to parse or install YAML")}})});let L=async(x,g)=>{if(!x||!Object.keys(x).length){new v.Notice("No snippets found in package");return}let S=di(x,this.plugin.settings.snippets);if(S.conflicts.length===0){let w=Object.keys(this.plugin.settings.snippets).length,I=g?{...this.plugin.settings.snippets,...x}:{...x,...this.plugin.settings.snippets};this.plugin.settings.snippets=I,await this.plugin.saveSettings();let H=Object.keys(this.plugin.settings.snippets).length;new v.Notice(`Installed ${Object.keys(x).length} snippet(s) (+${H-w}).`),this.display();return}let m=new ke(this.app,this.plugin,"Preview package changes",S);m.onConfirm=async w=>{this.plugin.settings.snippets=w,await this.plugin.saveSettings(),new v.Notice(`Installed ${S.added.length} new; resolved ${S.conflicts.length} conflict(s).`),this.display()},m.open()};n.createEl("h3",{text:"Snippets"}),new v.Setting(n).setName("Search").setDesc("Filter by trigger or replacement text.").addText(x=>x.setPlaceholder("Type to filter\u2026").onChange(g=>{this.searchQuery=g.trim().toLowerCase(),D()}));let Qe;new v.Setting(n).setName("Selection mode").setDesc("Enable multi-select (checkboxes) to perform bulk actions. Use group checkboxes for \u201CSelect all\u201D.").addToggle(x=>{Qe=x,x.setTooltip("Enable selection mode to pick multiple snippets").setValue(this.selectionMode).onChange(g=>{this.selectionMode=g,g||this.selected.clear(),D()})}),new v.Setting(n).setName("Groups").setDesc("Expand or collapse all groups.").addButton(x=>x.setButtonText("Expand all").onClick(()=>{for(let g of this.groupOpen.keys())this.groupOpen.set(g,!0),this.saveOpenState(g,!0);D()})).addButton(x=>x.setButtonText("Collapse all").onClick(()=>{for(let g of this.groupOpen.keys())this.groupOpen.set(g,!1),this.saveOpenState(g,!1);D()}));let ie=n.createDiv(),D=()=>{ie.empty(),(()=>{if(!this.selectionMode)return;let m=ie.createDiv({cls:"snipsidian-bulkbar"});m.createDiv({cls:"snipsidian-bulk-left"}).createSpan({text:`${this.selected.size} selected`});let I=m.createSpan();I.style.flex="1";let H=m.createEl("button",{text:"Move to\u2026"});H.disabled=this.selected.size===0,H.onclick=()=>{if(this.selected.size===0)return;let k=this.allGroupsFrom(this.plugin.settings.snippets).filter(P=>P!=="Ungrouped"),Y=new Te(this.app,{title:`Move ${this.selected.size} snippet(s) to\u2026`,groups:k,allowUngrouped:!0});Y.onSubmit=async P=>{if(P===null)return;let{moved:O,skipped:A}=this.bulkMoveKeys(P,Array.from(this.selected));await this.plugin.saveSettings();let K=P||"Ungrouped";this.groupOpen.set(K,!0),this.saveOpenState(K,!0),D(),new v.Notice(`Moved ${O} item(s)${A?`, skipped ${A} (conflicts)`:""}.`)},Y.open()};let G=m.createEl("button",{text:"Exit selection"});G.onclick=()=>{this.selectionMode=!1,this.selected.clear(),Qe?.setValue(!1),D()};let Ie=m.createEl("button",{text:`Delete (${this.selected.size})`});Ie.disabled=this.selected.size===0,Ie.onclick=async()=>{if(this.selected.size===0)return;let k=this.selected.size;if(confirm(`Delete ${k} selected snippet(s)?`)){for(let Y of this.selected)delete this.plugin.settings.snippets[Y];await this.plugin.saveSettings(),this.selected.clear(),D(),new v.Notice(`Deleted ${k} snippet(s).`)}}})();let g=Object.entries(this.plugin.settings.snippets).filter(([m,w])=>this.searchQuery?m.toLowerCase().includes(this.searchQuery)||w.toLowerCase().includes(this.searchQuery):!0).sort(([m],[w])=>m.localeCompare(w));if(!g.length){ie.createDiv({text:"No snippets match the filter."}).addClass("snipsidian-empty");return}let S=new Map;for(let m of g){let[w]=m,I=w.includes("/")?w.split("/",1)[0]:"Ungrouped";S.has(I)||S.set(I,[]),S.get(I).push(m)}for(let m of S.keys())this.groupOpen.has(m)||this.groupOpen.set(m,this.loadOpenState(m,!0));for(let[m,w]of S){let I=ie.createDiv({cls:"snipsidian-group-header"});if(I.createEl("button",{text:this.groupOpen.get(m)?"\u25BE":"\u25B8"}).addEventListener("click",()=>{let k=!this.groupOpen.get(m);this.groupOpen.set(m,k),this.saveOpenState(m,k),D()}),this.selectionMode){let k=document.createElement("input");k.type="checkbox",k.classList.add("snipsidian-group-checkbox");let Y=w.map(([A])=>A),P=Y.every(A=>this.selected.has(A)),O=!P&&Y.some(A=>this.selected.has(A));k.checked=P,k.indeterminate=O,k.title="Select all in group",k.onchange=()=>{k.checked?Y.forEach(A=>this.selected.add(A)):Y.forEach(A=>this.selected.delete(A)),D()},I.insertAdjacentElement("beforeend",k)}let G=m==="Ungrouped"?"Ungrouped":ne(m);if(I.createEl("span",{text:` ${G} (${w.length})`}),m!=="Ungrouped"){let k=I.createDiv({cls:"snipsidian-group-actions"}),Y=k.createEl("button",{text:"Rename"});Y.onclick=async()=>{let O=window.prompt(`Rename group "${G}" to:`,G);if(O===null)return;let A=ee(O);if(!A){new v.Notice("Empty name not allowed.");return}if(A===m)return;let K=this.plugin.settings.snippets;for(let[j]of w){let{name:W}=Z(j),_=`${A}/${W}`;if(_ in K&&!w.find(([M])=>M===_)){new v.Notice(`Conflict for "${_}". Rename aborted.`);return}}let C=0;for(let[j]of w){let{name:W}=Z(j),_=`${A}/${W}`;this.safeRenameKey(K,j,_).ok&&C++}await this.plugin.saveSettings(),this.groupOpen.delete(m),this.saveOpenState(m,void 0),this.groupOpen.set(A,!0),this.saveOpenState(A,!0),D(),new v.Notice(`Renamed group to "${ne(A)}" (${C} moved).`)};let P=k.createEl("button",{text:"Delete group"});P.onclick=async()=>{if(w.length===0){this.groupOpen.delete(m),this.saveOpenState(m,void 0),D();return}if(window.confirm(`Delete group "${G}" with ${w.length} snippet(s)?
OK = Delete all,  Cancel = Move to another folder\u2026`)){for(let[A]of w)delete this.plugin.settings.snippets[A];await this.plugin.saveSettings(),this.groupOpen.delete(m),this.saveOpenState(m,void 0),D(),new v.Notice(`Deleted ${w.length} snippet(s) from "${G}".`)}else{let A=this.promptNewGroup("");if(A===null)return;let{moved:K,skipped:C}=this.bulkMoveKeys(A,w.map(([j])=>j));await this.plugin.saveSettings(),this.groupOpen.set(A||"Ungrouped",!0),this.saveOpenState(A||"Ungrouped",!0),D(),new v.Notice(`Moved ${K} from "${G}" to "${ne(A||"Ungrouped")}"`+(C?`, skipped ${C} (conflicts)`:""))}}}if(!this.groupOpen.get(m))continue;let Ie=Array.from(S.keys()).filter(k=>k!==m&&k!=="Ungrouped").sort();w.forEach(([k,Y])=>{let P=new v.Setting(ie);if(this.selectionMode){let C=document.createElement("input");C.type="checkbox",C.classList.add("snipsidian-row-checkbox"),C.checked=this.selected.has(k),C.onchange=()=>{C.checked?this.selected.add(k):this.selected.delete(k),D()},P.controlEl.insertAdjacentElement("afterbegin",C)}let O=k,{group:A,name:K}=Z(k);P.addDropdown(C=>{C.addOption("","Ungrouped");let j=this.allGroupsFrom(this.plugin.settings.snippets).filter(_=>_!=="Ungrouped");for(let _ of j)C.addOption(_,ne(_));C.addOption("__new__","New group\u2026"),C.setValue(A||""),C.onChange(async _=>{if(_==="__new__"){let M=this.promptNewGroup("");if(M===null){C.setValue(A||"");return}await W(M),C.setValue(M||"")}else await W(_)});let W=async _=>{let M=_?`${_}/${K}`:K;if(M===O)return;if(M in this.plugin.settings.snippets){new v.Notice(`Trigger "${M}" already exists`),C.setValue(A||"");return}let ae=this.safeRenameKey(this.plugin.settings.snippets,O,M);if(!ae.ok){new v.Notice(ae.reason??"Failed to move"),C.setValue(A||"");return}O=M,this.groupOpen.set(_||"Ungrouped",!0),this.saveOpenState(_||"Ungrouped",!0),await this.plugin.saveSettings(),D()}}),P.addText(C=>C.setPlaceholder("trigger").setValue(K).onChange(async j=>{let W=gi(j);if(!W)return;let _=mi(A,W);if(_===O)return;if(Ve(W)){new v.Notice("Trigger cannot be empty or contain spaces/punctuation"),C.inputEl.value=Z(O).name;return}let M=this.plugin.settings.snippets,ae=M[O];if(delete M[O],this.selected.has(O)&&(this.selected.delete(O),this.selected.add(_)),_ in M){new v.Notice(`Trigger "${_}" already exists`),M[O]=ae,C.inputEl.value=Z(O).name;return}M[_]=ae,O=_,await this.plugin.saveSettings(),D()})),P.addTextArea(C=>{C.setPlaceholder("replacement (e.g. be right back)").setValue(Y).onChange(async j=>{this.plugin.settings.snippets[O]=j,await this.plugin.saveSettings()}),C.inputEl.rows=2}),P.addExtraButton(C=>C.setIcon("trash").setTooltip("Delete snippet").onClick(async()=>{confirm(`Delete snippet "${O}"?`)&&(delete this.plugin.settings.snippets[O],await this.plugin.saveSettings(),D())}))})}new v.Setting(ie).addButton(m=>m.setButtonText("+ Add snippet").setCta().onClick(async()=>{let w=this.searchQuery?this.searchQuery:"trigger";w=w.replace(/\s+/g,"-"),Ve(w)&&(w="trigger");let I=w,H=1;for(;this.plugin.settings.snippets[I]!==void 0;)I=`${w}${H++}`;this.plugin.settings.snippets[I]="",await this.plugin.saveSettings(),this.groupOpen.set(I.includes("/")?I.split("/",1)[0]:"Ungrouped",!0),D()}))};D()}};var ge=class extends xi.Plugin{settings;off;async onload(){await this.loadSettings(),this.off=an(this.app,()=>this.settings.snippets),this.addCommand({id:"insert-hello-world",name:"Insert Hello World",editorCallback:n=>n.replaceSelection("Hello World")}),this.addSettingTab(new Oe(this.app,this)),console.log("SnipSidian/Hotstrings modular plugin loaded")}onunload(){try{this.off?.()}catch{}console.log("SnipSidian/Hotstrings modular plugin unloaded")}async loadSettings(){let i=(await this.loadData())?.snippets??{};this.settings={snippets:{...ve,...i}}}async saveSettings(){await this.saveData(this.settings)}};var Wo=ge;})();
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
